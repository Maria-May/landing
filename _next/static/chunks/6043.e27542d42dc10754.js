(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6043],{66043:function(e,t,n){"use strict";n.r(t),n.d(t,{GraphPlayround:function(){return ed}});var r=n(85893),o=n(34761),i=n(96756),s=n(70746),c=n(50254),a=n(68208),l=n(5233),d=n(46369);n(86540);var h=n(4373),u=n(21203),g=n(56919),p=n(16468),m=n(43671),b=n(48323),k=n(20178),x=n(83608),f=n.n(x),C=n(67294),y=n(38059);n(27624);let v=(0,d.Ge)("block");function j(e){let{graph:t,block:n}=e;return(0,r.jsxs)(h.Je,{graph:t,block:n,className:v(),children:[n.anchors.map(e=>(0,r.jsx)(h.zg,{position:"absolute",graph:t,anchor:e},e.id)),(0,r.jsxs)(p.k,{grow:1,direction:"column",children:[(0,r.jsx)(b.x,{ellipsis:!0,variant:"caption-2",className:v("name"),children:n.name}),(0,r.jsx)(b.x,{ellipsis:!0,variant:"caption-1",color:"secondary",children:n.meta?.description})]}),(0,r.jsx)(p.k,{children:(0,r.jsx)(c.z,{onClick:e=>e.stopPropagation(),children:(0,r.jsx)(m.J,{data:y.Z})})})]})}function S(e){let t=18*e;return e>=1&&(t+=8*e),t+18}class B extends h.lR{renderHTML(){return(0,r.jsx)(j,{graph:this.context.graph,block:this.connectedState.$state.value})}getAnchorPosition(e){let t=this.getAnchorsYOffter(e.type),n=S(this.connectedState.$anchorIndexs.value?.get(e.id)||0);return{x:e.type===h.TX.OUT?this.state.width:0,y:t+n}}renderMinimalisticBlock(e){this.renderBody(e),.1>this.context.camera.getCameraScale()||(e.fillStyle="rgba(255, 190, 92, 1)",function(e,t,n){t.save();let r=new Path2D(e.path),o=e.width/e.iniatialWidth,i=e.height/e.initialHeight;t.translate(n.x+n.width/2-e.width/2,n.y+n.height/2-e.height/2),t.scale(o,i),t.fill(r,"evenodd"),t.restore()}({path:"M5.75 2.5H10.25C10.7842 2.5 11.2532 2.77929 11.519 3.19983C10.6259 3.58121 10 4.46751 10 5.5C10 6.61941 10.7357 7.56698 11.75 7.88555V12C11.75 12.8284 11.0784 13.5 10.25 13.5H5.75C5.21576 13.5 4.74676 13.2207 4.48102 12.8002C5.3741 12.4188 6 11.5325 6 10.5C6 9.38059 5.26428 8.43302 4.25 8.11445V7.88555C5.26428 7.56698 6 6.61941 6 5.5C6 4.46751 5.3741 3.58121 4.48102 3.19982C4.74676 2.77929 5.21576 2.5 5.75 2.5ZM2.75 8.11445V7.88555C1.73572 7.56698 1 6.61941 1 5.5C1 4.32762 1.80699 3.34373 2.8958 3.0735C3.28617 1.87008 4.41648 1 5.75 1H10.25C11.5835 1 12.7138 1.87008 13.1042 3.07351C14.193 3.34373 15 4.32762 15 5.5C15 6.61941 14.2643 7.56698 13.25 7.88555V12C13.25 13.6569 11.9069 15 10.25 15H5.75C4.41647 15 3.28616 14.1299 2.8958 12.9265C1.80699 12.6563 1 11.6724 1 10.5C1 9.38059 1.73572 8.43302 2.75 8.11445ZM3.5 11.5C4.05228 11.5 4.5 11.0523 4.5 10.5C4.5 9.94771 4.05228 9.5 3.5 9.5C2.94772 9.5 2.5 9.94772 2.5 10.5C2.5 11.0523 2.94772 11.5 3.5 11.5ZM2.5 5.5C2.5 4.94772 2.94772 4.5 3.5 4.5C4.05228 4.5 4.5 4.94772 4.5 5.5C4.5 6.05228 4.05228 6.5 3.5 6.5C2.94772 6.5 2.5 6.05229 2.5 5.5ZM12.5 4.5C11.9477 4.5 11.5 4.94772 11.5 5.5C11.5 6.05229 11.9477 6.5 12.5 6.5C13.0523 6.5 13.5 6.05229 13.5 5.5C13.5 4.94772 13.0523 4.5 12.5 4.5Z",width:56,height:56,iniatialWidth:14,initialHeight:14},e,this.getContentRect()))}renderSchematicView(e){this.renderBody(e),this.context.camera.getCameraScale()>this.context.constants.block.SCALES[0]&&(e.fillStyle=this.context.colors.block?.text||"",e.textAlign="center",this.renderTextAtCenter(this.state.name,e))}subscribe(e){let t=super.subscribe(e);return t.push(this.addEventListener("mouseenter",()=>{this.hovered=!0,this.performRender()}),this.addEventListener("mouseleave",()=>{this.hovered=!1,this.performRender()})),t}renderName(e){this.context.camera.getCameraScale()>this.context.constants.block.SCALES[0]&&(e.fillStyle=this.context.colors.block?.text||"",e.textAlign="center",this.renderText(this.state.name,e))}getAnchorsYOffter(e){let t=this.connectedState.$state.value.anchors.filter(t=>t.type===e),{height:n}=this.getContentRect();return(n-S(t.length-1))/2}renderTextAtCenter(e,t){let n=this.getContentRect(),r=this.context.camera.getCameraScale();t.fillStyle=this.context.colors.block?.text||"",t.textAlign="center",t.textBaseline="top";let{lines:o,measures:i}=(0,h.If)(e,t,n,{font:`500 ${9/r}px YS Text`,lineHeight:9/r}),s=n.height/2-i.height/2;for(let e=0;e<o.length;e++){let[n,r,i]=o[e],c=Math.floor(i+s);t.fillText(n,r,c)}}renderBody(e){let t=this.context.camera.getCameraScale();e.fillStyle=this.hovered?"rgba(57, 47, 57, 1)":this.context.colors.block?.background||"",e.beginPath(),e.roundRect(this.state.x,this.state.y,this.state.width,this.state.height,8),e.fill(),this.state.selected?(e.lineWidth=Math.min(Math.round(2/t),12),e.strokeStyle=this.context.colors.block?.selectedBorder||""):(e.lineWidth=Math.min(Math.round(1/t),12),e.strokeStyle=this.hovered?"rgba(229, 229, 229, 0.4)":this.context.colors.block?.border||""),e.stroke(),e.closePath()}constructor(...e){super(...e),this.cursor="pointer",this.hovered=!1}}var N=n(34424),w=n(63764),I=n(66375);n(78407);let A="gravity";function T(e,t){let n=e.getValue(),r=`"id": "${String(t)}"`,o=n.indexOf(r),i=n.lastIndexOf("{",o),s=n.indexOf("}",o),c=1,a=s+1;for(;c>0&&a<n.length;)"{"===n[a]?c++:"}"===n[a]&&c--,a++;return s=a,{start:e.getPositionAt(i),end:e.getPositionAt(s)}}w._m.init().then(e=>{!function(e){e.editor.defineTheme(A,{base:"vs-dark",inherit:!0,rules:[{token:"string.key.json",foreground:"#febe5c"}],colors:{"editor.foreground":"#ffdb4d4d","editor.background":"#251b25","editor.lineHighlightBackground":"#ffdb4d4d","editorLineNumber.foreground":"#bd5c0a","editor.selectionBackground":"#ffdb4d4d","editor.inactiveSelectionBackground":"#ffdb4d4d"}})}(e),function(e){e.languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,schemaValidation:"error",schemas:[{uri:"http://gravity/graph-playground/schema.json",fileMatch:["*"],schema:{type:"object",properties:{blocks:{type:"array",items:{$ref:"#/definitions/TBlock"},description:"List of blocks (TBlock[])"},connections:{type:"array",items:{$ref:"#/definitions/TConnection"},description:"List of connections (TConnection[])"}},required:["blocks","connections"],definitions:{TBlock:{type:"object",properties:{id:{type:"string",description:"Block identifier (TBlockId)"},is:{type:"string",description:"String representation of the block type"},x:{type:"number",description:"X coordinate"},y:{type:"number",description:"Y coordinate"},width:{type:"number",description:"Block width"},height:{type:"number",description:"Block height"},selected:{type:"boolean",description:"Flag indicating if the block is selected"},name:{type:"string",description:"Block name"},anchors:{type:"array",items:{$ref:"#/definitions/TAnchor"},description:"List of anchors (TAnchor[])"},meta:{type:"object",description:"Meta information (optional)"}},required:["id","is","x","y","width","height","selected","name","anchors"]},TConnection:{type:"object",properties:{sourceBlockId:{type:"string",description:"Identifier of the source block"},targetBlockId:{type:"string",description:"Identifier of the target block"},sourceAnchorId:{type:"string",description:"Identifier of the source anchor (optional)"},targetAnchorId:{type:"string",description:"Identifier of the target anchor (optional)"},label:{type:"string",description:"Connection label (optional)"},styles:{type:"object",properties:{dashes:{type:"array",items:{type:"number"},description:"Array of dash lengths for dashed lines (optional)"}},additionalProperties:!0,description:"Connection styles (optional)"},dashed:{type:"boolean",description:"Flag indicating if the line is dashed (optional)"},selected:{type:"boolean",description:"Flag indicating if the connection is selected (optional)"}},required:["sourceBlockId","targetBlockId"]},TAnchor:{type:"object",properties:{id:{type:"string",description:"Anchor identifier"},blockId:{type:"string",description:"Identifier of the block this anchor belongs to"},type:{type:"string",enum:["IN","OUT"],description:"Anchor type, either IN or OUT"},index:{type:"number",description:"Anchor index"}},required:["id","blockId","type"]}}}}]})}(e)});let L=(0,d.Ge)("editor"),z=C.forwardRef(function(e,t){let[n,o]=(0,C.useState)(),i=(0,C.useRef)(),s=(0,C.useRef)({blocks:[],connections:[]});(0,C.useImperativeHandle)(t,()=>({scrollTo:e=>{if(!i.current)return;let t=T(i.current.getModel(),e);t?.start.column&&i.current?.revealLinesInCenter(t.start.lineNumber,t.end.lineNumber,0),i.current.setSelection({startColumn:t.start.column,startLineNumber:t.start.lineNumber,endColumn:t.end.column,endLineNumber:t.end.lineNumber})},updateBlocks:e=>{let t=i.current?.getModel();if(!t)return;let n=e.map(e=>{let n=T(t,e.id),r=JSON.stringify({block:[e]},null,2);return{range:{startColumn:n.start.column,startLineNumber:n.start.lineNumber,endColumn:n.end.column,endLineNumber:n.end.lineNumber},text:r.slice(19,r.length-6)}});t.applyEdits(n)},setContent:e=>{let{blocks:t,connections:n}=e;s.current={blocks:t,connections:n},i.current&&i.current?.setValue(JSON.stringify(s.current,null,2))}}));let a=(0,C.useCallback)(()=>{let t=i.current?.getModel();if(t)try{let n=JSON.parse(t.getValue());e?.onChange?.({blocks:n.blocks,connections:n.conections})}catch(e){console.error(e)}},[i]);return(0,r.jsxs)(p.k,{direction:"column",className:L(),children:[(0,r.jsx)(p.k,{grow:1,children:(0,r.jsx)(w.ML,{onMount:e=>{i.current=e,i.current?.setValue(JSON.stringify(s.current,null,2)),e.addCommand(I.DC.CtrlCmd|I.VD.Enter,a)},onValidate:e=>{o(e.filter(e=>8===e.severity)[0]||null)},language:"json",theme:A,options:{contextmenu:!1,lineNumbersMinChars:4,glyphMargin:!1,fontSize:18,lineHeight:20,colorDecorators:!0,minimap:{enabled:!1},smoothScrolling:!0,"bracketPairColorization.editor":!0}})}),(0,r.jsxs)(p.k,{className:L("actions"),gap:3,children:[(0,r.jsxs)(c.z,{size:"l",disabled:!!n,view:"action",onClick:a,children:["Apply ",(0,r.jsx)(N.q,{className:L("hotkey"),view:"light",value:"mod+enter"})]}),(0,r.jsx)(c.z,{size:"l",disabled:!!n,onClick:e.addBlock,children:"Add Block"}),n&&(0,r.jsx)(p.k,{grow:1,alignItems:"center",justifyContent:"flex-end",children:(0,r.jsx)(b.x,{color:"danger",children:(0,r.jsx)("span",{style:{cursor:"pointer"},onClick:()=>{i.current?.revealLinesInCenter(n.startLineNumber,n.endLineNumber,0),i.current?.setSelection({startColumn:n.startColumn,startLineNumber:n.startLineNumber,endColumn:n.endColumn,endLineNumber:n.endLineNumber})},children:n.message})})})]})]})});n(20937);var M=n(852),E=n(555);n(66641);let R=[{value:"bezier",content:"Bezier"},{value:"line",content:"Line"}],$=[{value:"bezier",content:"Show"},{value:"line",content:"Hide"}],F=(0,d.Ge)("graph-settings");function H(e){let{className:t,radionButtonClass:n,graph:o}=e,i=function(){let[e,t]=(0,C.useState)(Date.now());return(0,C.useCallback)(()=>{t(Date.now())},[])}(),s=(0,C.useRef)(null),[a,l]=(0,C.useState)(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.z,{size:"l",view:a?"action":"raised",className:t,ref:s,onClick:()=>l(e=>!e),children:(0,r.jsx)(m.J,{data:M.Z})}),(0,r.jsx)(E.G,{anchorRef:s,open:a,onClose:()=>l(!1),placement:["right-end"],children:(0,r.jsxs)(p.k,{direction:"column",className:F("popup"),gap:3,children:[(0,r.jsx)(b.x,{variant:"subheader-2",children:"Graph settings"}),(0,r.jsxs)(p.k,{direction:"column",gap:2,children:[(0,r.jsx)(b.x,{variant:"subheader-1",children:"Connection type"}),(0,r.jsx)(k.E,{className:n,size:"l",onUpdate:e=>{o.updateSettings({useBezierConnections:e===R[0].value}),i()},value:R[o.rootStore.settings.getConfigFlag("useBezierConnections")?0:1].value,options:R})]}),(0,r.jsxs)(p.k,{direction:"column",gap:2,children:[(0,r.jsx)(b.x,{variant:"subheader-1",children:"Show arrows"}),(0,r.jsx)(k.E,{size:"l",className:n,onUpdate:e=>{o.updateSettings({showConnectionArrows:e===$[0].value}),i()},value:$[o.rootStore.settings.getConfigFlag("showConnectionArrows")?0:1].value,options:$})]})]})})]})}var J=n(20522);n(71640);let Z=(0,d.Ge)("text-block");function O(e){let{graph:t,block:n}=e;return(0,r.jsx)(h.Je,{graph:t,block:n,className:Z(),children:(0,r.jsxs)(p.k,{direction:"row",gap:2,alignItems:"center",grow:1,children:[(0,r.jsx)(m.J,{className:Z("icon"),data:J.Z,size:18}),(0,r.jsx)(b.x,{className:Z("text"),ellipsis:!0,variant:"body-1",children:n.meta?.text})]})})}class V extends h.lR{renderHTML(){return(0,r.jsx)(O,{graph:this.context.graph,block:this.connectedState.$state.value})}renderMinimalisticBlock(e){this.renderBody(e)}renderSchematicView(e){this.renderBody(e),this.context.camera.getCameraScale()>this.context.constants.block.SCALES[0]&&this.renderName(e)}subscribe(e){let t=super.subscribe(e);return t.push(this.addEventListener("mouseenter",()=>{this.hovered=!0,this.performRender()}),this.addEventListener("mouseleave",()=>{this.hovered=!1,this.performRender()})),t}renderName(e){e.fillStyle="rgba(189, 142, 75, 1)",e.textAlign="center",this.renderText(this.state.meta?.text||"",e)}renderTextAtCenter(e,t){let n=this.getContentRect(),r=this.context.camera.getCameraScale();t.fillStyle="rgba(189, 142, 75, 1)",t.textAlign="center",t.textBaseline="bottom";let{lines:o,measures:i}=(0,h.If)(e,t,n,{font:`500 ${13/r}px YS Text`,lineHeight:9/r}),s=n.height/2-i.height/2;for(let e=0;e<o.length;e++){let[n,r,i]=o[e],c=Math.round(i+s);t.fillText(n,r,c)}}renderBody(e){let t=this.context.camera.getCameraScale();e.save(),e.lineWidth=Math.min(Math.round(2/t),12),e.fillStyle="rgba(189, 142, 75, 0.1)",e.beginPath(),e.roundRect(this.state.x,this.state.y,this.state.width,this.state.height,8),e.fill(),this.state.selected?e.lineWidth=Math.min(Math.round(2/t),12):(e.lineWidth=2,e.setLineDash([4,4])),e.strokeStyle="rgba(189, 142, 75, 1)",e.stroke(),e.closePath(),e.restore()}constructor(...e){super(...e),this.cursor="pointer",this.hovered=!1}}var D=n(65474),P=n(76949),_=n(42991),G=n(40954);function U(e){let{className:t,graph:n}=e,[o,i]=(0,C.useState)(1);return(0,h.sF)(n,"camera-change",e=>{let{scale:t}=e;i(t)}),(0,r.jsxs)(p.k,{grow:1,justifyContent:"center",className:t,direction:"column",children:[(0,r.jsx)(G.u,{content:"Zoom in",placement:"right",children:(0,r.jsx)(c.z,{size:"l",view:"raised",onClick:()=>{n.zoom({scale:n.cameraService.getCameraScale()+.08})},disabled:o>=n.cameraService.getCameraState().scaleMax,children:(0,r.jsx)(m.J,{data:D.Z})})}),(0,r.jsx)(G.u,{content:"Fit to viewport",placement:"right",children:(0,r.jsx)(c.z,{size:"l",view:"raised",onClick:()=>{n.zoomTo("center")},children:(0,r.jsx)(m.J,{data:P.Z})})}),(0,r.jsx)(G.u,{content:"Zoom out",placement:"right",children:(0,r.jsx)(c.z,{size:"l",view:"raised",onClick:()=>{n.zoom({scale:n.cameraService.getCameraScale()-.08})},disabled:o<=n.cameraService.getCameraState().scaleMin,children:(0,r.jsx)(m.J,{data:_.Z})})})]})}let X="block-action",W="block-text";function q(e){return`action_${e}`}function Y(e,t,n){let r=q(n);return{is:X,id:r,x:e,y:t,width:126,height:126,selected:!1,name:`Block #${n}`,anchors:[{id:`${r}_in`,blockId:r,type:h.TX.IN},{id:`${r}_out`,blockId:r,type:h.TX.OUT}],meta:{description:"Description"}}}function Q(e,t,n,r,o){return{is:W,id:`text_${r}`,x:e,y:t,width:n,height:48,selected:!1,name:"Text Block",anchors:[],meta:{text:o}}}function K(e,t){return Math.round(Math.random()*(t-e)+e)}function ee(e,t){let n={blocks:[],connections:[]},r=[],o=0;for(let i=0;i<=e;i++){let s=i**2;i>=e/2&&(s=(e-i)**2);let c=(500-200*s)/2,a=500*i*2.5,l=[];for(let e=0;e<=s;e++){let t=Y(a,c+200*e,++o);n.blocks.push(t),l.push(t)}if(i>1){for(let e=0;e<=t;e++){let e=K(n.blocks.length-l.length-r.length-1,n.blocks.length-l.length-1),t=K(n.blocks.length-l.length-1,n.blocks.length-1);if(e!==t){let r=q(e),o=q(t);n.connections.push({sourceBlockId:r,sourceAnchorId:`${r}_anchor_out`,targetBlockId:o,targetAnchorId:`${o}_anchor_in`})}}r=[...l]}}return n}let et=(0,d.Ge)("graph-playground"),en=(0,d.Ge)("graph-playground-radio-buton"),er=ee(0,5),eo=[Q(-144,80,448,0,"To create new block, drag and drop new connection from edge"),Q(-64,160,240,1,"Use scroll to zoom in or out")],ei={viewConfiguration:{colors:{selection:{background:"rgba(255, 190, 92, 0.1)",border:"rgba(255, 190, 92, 1)"},connection:{background:"rgba(255, 255, 255, 0.5)",selectedBackground:"rgba(234, 201, 74, 1)"},block:{background:"rgba(37, 27, 37, 1)",border:"rgba(229, 229, 229, 0.2)",selectedBorder:"rgba(255, 190, 92, 1)",text:"rgba(255, 255, 255, 1)"},anchor:{background:"rgba(255, 190, 92, 1)"},canvas:{layerBackground:"rgba(22, 13, 27, 1)",belowLayerBackground:"rgba(22, 13, 27, 1)",dots:"rgba(255, 255, 255, 0.2)",border:"rgba(255, 255, 255, 0.3)"}},constants:{block:{SCALES:[.1,.2,.5]}}},settings:{canDragCamera:!0,canZoomCamera:!0,canDuplicateBlocks:!1,canChangeBlockGeometry:h.Q7.ALL,canCreateNewConnections:!1,showConnectionArrows:!1,scaleFontSize:1,useBezierConnections:!0,useBlocksAnchors:!0,showConnectionLabels:!1,blockComponents:{[X]:B,[W]:V}}},es=[{value:"1",content:"1"},{value:"100",content:"100"},{value:"1000",content:"1 000"},{value:"10000",content:"10 000"}];function ec(e){let t=(0,C.useRef)(e);return t.current=e,(0,C.useCallback)(function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.current(...n)},[])}function ea(e){let{className:t}=e,{graph:n,setEntities:o,updateEntities:i,start:s}=(0,h.n4)(ei),a=(0,C.useRef)(null),[l,d]=(0,C.useState)(!0),x=ec(()=>{let e=n.rootStore.getAsConfig();a.current?.setContent({blocks:e.blocks||[],connections:e.connections||[]})});(0,h.sF)(n,"block-change",e=>{let{block:t}=e;a.current?.updateBlocks([t]),a.current?.scrollTo(t.id)}),(0,h.sF)(n,"blocks-selection-change",e=>{let{changes:t}=e;a.current?.updateBlocks([...t.add.map(e=>({...n.rootStore.blocksList.getBlock(e),selected:!0})),...t.removed.map(e=>({...n.rootStore.blocksList.getBlock(e),selected:!1}))])}),(0,h.sF)(n,"connection-created",(e,t)=>{let{sourceBlockId:r,sourceAnchorId:o,targetBlockId:i,targetAnchorId:s}=e;t.preventDefault(),o&&(n.rootStore.blocksList.getBlockState(r).getAnchorById(o).state.type===h.TX.IN?n.api.addConnection({sourceBlockId:i,sourceAnchorId:s,targetBlockId:r,targetAnchorId:o}):n.api.addConnection({sourceBlockId:r,sourceAnchorId:o,targetBlockId:i,targetAnchorId:s}),x())}),(0,h.sF)(n,"connection-create-drop",e=>{let t,{sourceBlockId:r,sourceAnchorId:o,targetBlockId:i,point:s}=e;i||(n.rootStore.blocksList.getBlockState(r).getAnchorById(o).state.type===h.TX.IN?(t=Y(s.x-126,s.y-63,n.rootStore.blocksList.$blocksMap.value.size+1),n.api.addBlock(t),n.api.addConnection({sourceBlockId:t.id,sourceAnchorId:t.anchors[1].id,targetBlockId:r,targetAnchorId:o})):(t=Y(s.x,s.y-63,n.rootStore.blocksList.$blocksMap.value.size+1),n.api.addBlock(t),n.api.addConnection({sourceBlockId:r,sourceAnchorId:o,targetBlockId:t.id,targetAnchorId:t.anchors[0].id})),n.zoomTo([t.id],{transition:250}),x(),a.current?.scrollTo(t.id))}),(0,C.useLayoutEffect)(()=>{o({blocks:[...eo,...er.blocks],connections:er.connections}),x()},[o]),(0,h.sF)(n,"state-change",e=>{let{state:t}=e;t===h.VM.ATTACHED&&(s(),n.zoomTo("center",{padding:300}))});let y=ec(()=>{let e=n.rootStore.blocksList.getUsableRect(),t=Y(f()(e.x,e.x+e.width+100),f()(e.y,e.y+e.height+100),n.rootStore.blocksList.$blocksMap.value.size+1);n.api.addBlock(t),n.zoomTo([t.id],{transition:250}),x(),a.current?.scrollTo(t.id)}),v=ec((e,t)=>{let n=e.rootStore.blocksList.getBlockState(t.id)?.getViewComponent();return n instanceof B||n instanceof V?n.renderHTML():(0,r.jsxs)(h.Je,{graph:e,block:t,children:["Unknown block ",(0,r.jsx)(r.Fragment,{children:t.id})]})});(0,h.sF)(n,"blocks-selection-change",e=>{let{list:t}=e;1===t.length&&a.current?.scrollTo(t[0])}),(0,C.useEffect)(()=>{let e=e=>{"Backspace"===e.code&&(n.api.deleteSelected(),x())};return document.body.addEventListener("keydown",e),()=>document.body.removeEventListener("keydown",e)});let j=async e=>{let t;switch(e){case es[0].value:t=ee(0,5);break;case es[1].value:t=ee(10,100);break;case es[2].value:t=ee(23,150),d(!1);break;case es[3].value:n.updateSettings({useBezierConnections:!1}),d(!1),t=ee(50,150)}t&&(await new Promise(e=>setTimeout(e,200)),o({blocks:t?.blocks,connections:t?.connections}),n.zoomTo("center",{transition:500}),x())};return(0,r.jsxs)(p.k,{className:et(null,t),gap:l?8:0,children:[(0,r.jsx)(c.z,{className:et("layout-button"),onClick:()=>d(!l),children:(0,r.jsx)(m.J,{data:l?u.Z:g.Z})}),(0,r.jsxs)(p.k,{direction:"column",grow:1,className:et("content",{graph:!0}),gap:6,children:[(0,r.jsxs)(p.k,{direction:"row",gap:4,alignItems:"center",children:[(0,r.jsx)(b.x,{variant:"header-1",className:et("title"),children:"Blocks"}),(0,r.jsx)(k.E,{className:en(),options:es,onUpdate:j,size:"l"})]}),(0,r.jsxs)(p.k,{grow:1,className:et("view",{"graph-editor":!0}),children:[(0,r.jsxs)(p.k,{className:et("graph-tools"),direction:"column",children:[(0,r.jsx)(U,{graph:n,className:et("zoom","button-group")}),(0,r.jsx)(H,{className:et("graph-settings"),radionButtonClass:en(),graph:n})]}),(0,r.jsx)(h.uR,{graph:n,renderBlock:v})]})]}),(0,r.jsxs)(p.k,{direction:"column",grow:1,className:et("content",{editor:!0,hidden:!l}),gap:6,children:[(0,r.jsx)(b.x,{variant:"header-1",className:et("title"),children:"JSON Editor"}),(0,r.jsx)(p.k,{grow:1,className:et("view",{"config-editor":!0}),children:(0,r.jsx)(z,{ref:a,onChange:e=>{let{blocks:t,connections:n}=e;i({blocks:t,connections:n})},addBlock:y})})]})]})}let el=(0,d.Ge)("graph"),ed=()=>{let{t:e,i18n:t}=(0,l.$G)("graph");return(0,r.jsxs)(o.r,{className:el(),containerClass:el("container"),children:[(0,r.jsx)(i.X,{className:el("title"),children:(0,r.jsxs)(s.J,{sizes:12,className:el("heading"),children:[(0,r.jsx)("h1",{className:el("title"),children:e("title")}),(0,r.jsx)("div",{className:el("actions"),children:(0,r.jsx)(c.z,{href:(0,d.n6)("/libraries/graph",t),className:el("library-button"),size:"xl",view:"outlined-contrast",children:e("goToLibrary")})})]})}),(0,r.jsx)(i.X,{className:el("playground"),children:(0,r.jsx)(a.f,{theme:"dark",children:(0,r.jsx)(ea,{className:el("graph-viewer")})})})]})}},86540:function(){},27624:function(){},78407:function(){},20937:function(){},66641:function(){},71640:function(){}}]);