(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3580],{93580:function(t,e,i){"use strict";i.d(e,{y:function(){return f}});var s=i(67294),n=i(35464),o=i(83614),r=i(97582),h=i(54026),a=i(82771),l=i(48440);let c=(0,i(76657).Ge)("sheet");class u{constructor(t,e){this.x=t,this.y=e,this.timeStamp=Date.now()}}class d{constructor(t=5){this.points=[],this.pointsLen=t,this.clear()}clear(){this.points=Array(this.pointsLen)}addMovement({x:t,y:e}){this.points.pop(),this.points.unshift(new u(t,e))}getYAcceleration(t=1){let e=this.points[0],i=this.points[t];return e&&i?(e.y-i.y)/Math.pow(e.timeStamp-i.timeStamp,2):0}}i(62866);let p=[];class m extends s.Component{constructor(){super(...arguments),this.veilRef=s.createRef(),this.sheetRef=s.createRef(),this.sheetTopRef=s.createRef(),this.sheetContentBoxRef=s.createRef(),this.sheetScrollContainerRef=s.createRef(),this.velocityTracker=new d,this.observer=null,this.resizeWindowTimer=null,this.state={startScrollTop:0,startY:0,deltaY:0,prevSheetHeight:0,swipeAreaTouched:!1,contentTouched:!1,veilTouched:!1,isAnimating:!1,inWindowResizeScope:!1},this.setStyles=({status:t,deltaHeight:e=0})=>{if(!this.sheetRef.current||!this.veilRef.current)return;let i=this.sheetHeight-e,s="showing"===t?`translate3d(0, -${i}px, 0)`:"translate3d(0, 0, 0)",n=0;"showing"===t&&(n=0===e?1:i/this.sheetHeight),this.veilRef.current.style.opacity=String(n),this.sheetRef.current.style.transform=s},this.getAvailableContentHeight=t=>{let e=.9*window.innerHeight-this.sheetTopHeight;return t>=e?e:t},this.show=()=>{this.setState({isAnimating:!0},()=>{this.setStyles({status:"showing"}),this.setHash()})},this.hide=()=>{this.setState({isAnimating:!0},()=>{this.setStyles({status:"hiding"}),this.removeHash()})},this.onSwipeAreaTouchStart=t=>{this.velocityTracker.clear(),this.setState({startY:t.nativeEvent.touches[0].clientY,swipeAreaTouched:!0})},this.onContentTouchStart=t=>{this.props.allowHideOnContentScroll&&!this.state.swipeAreaTouched&&(this.velocityTracker.clear(),this.setState({startY:t.nativeEvent.touches[0].clientY,startScrollTop:this.sheetScrollTop,contentTouched:!0}))},this.onSwipeAriaTouchMove=t=>{let e=t.nativeEvent.touches[0].clientY-this.state.startY;this.velocityTracker.addMovement({x:t.nativeEvent.touches[0].clientX,y:t.nativeEvent.touches[0].clientY}),this.setState({deltaY:e}),e<=0||this.setStyles({status:"showing",deltaHeight:e})},this.onContentTouchMove=t=>{if(!this.props.allowHideOnContentScroll)return;if(!this.state.startY){this.onContentTouchStart(t);return}let{startScrollTop:e,swipeAreaTouched:i}=this.state;if(i||this.sheetScrollTop>0||e>0&&e!==this.sheetScrollTop)return;let s=t.nativeEvent.touches[0].clientY-this.state.startY;this.velocityTracker.addMovement({x:t.nativeEvent.touches[0].clientX,y:t.nativeEvent.touches[0].clientY}),this.setState({deltaY:s}),s<=0||this.setStyles({status:"showing",deltaHeight:s})},this.onTouchEndAction=t=>{let e=this.velocityTracker.getYAcceleration();this.sheetHeight<=t?this.props.hideSheet():t>50&&e<=.08&&e>=-.02||e>.08?this.hide():0!==t&&this.show()},this.onSwipeAriaTouchEnd=()=>{let{deltaY:t}=this.state;this.onTouchEndAction(t),this.setState({startY:0,deltaY:0,swipeAreaTouched:!1})},this.onContentTouchEnd=()=>{let{deltaY:t,swipeAreaTouched:e}=this.state;this.props.allowHideOnContentScroll&&!e&&(this.onTouchEndAction(t),this.setState({startY:0,deltaY:0,contentTouched:!1}))},this.onVeilClick=()=>{this.setState({veilTouched:!0}),this.hide()},this.onVeilTransitionEnd=()=>{this.setState({isAnimating:!1}),"0"===this.veilOpacity&&this.props.hideSheet()},this.onContentTransitionEnd=t=>{"height"===t.propertyName&&this.sheetScrollContainerRef.current&&(this.sheetScrollContainerRef.current.style.transition="none")},this.onResizeWindow=()=>{this.setState({inWindowResizeScope:!0}),this.resizeWindowTimer&&window.clearTimeout(this.resizeWindowTimer),this.resizeWindowTimer=window.setTimeout(()=>{this.onResize()},25)},this.onResize=()=>{if(!this.sheetRef.current||!this.sheetScrollContainerRef.current)return;let t=this.sheetContentHeight;if(t===this.state.prevSheetHeight&&!this.state.inWindowResizeScope)return;let e=this.getAvailableContentHeight(t);this.sheetScrollContainerRef.current.style.transition=this.state.prevSheetHeight>t?"height 0s ease 0.3s":"none",this.sheetScrollContainerRef.current.style.height=`${e}px`,this.sheetRef.current.style.transform=`translate3d(0, -${e+this.sheetTopHeight}px, 0)`,this.setState({prevSheetHeight:t,inWindowResizeScope:!1})}}componentDidMount(){this.addListeners(),this.show();let t=this.getAvailableContentHeight(this.sheetContentHeight);this.setInitialStyles(t),this.setState({prevSheetHeight:t})}componentDidUpdate(t){let{visible:e,location:i}=this.props;!t.visible&&e&&this.show(),(t.visible&&!e||this.shouldClose(t))&&this.hide(),t.location.pathname!==i.pathname&&(p=[])}componentWillUnmount(){this.removeListeners()}render(){let{content:t,contentClassName:e,swipeAreaClassName:i,hideTopBar:n,title:o}=this.props,{deltaY:r,swipeAreaTouched:h,contentTouched:a,veilTouched:l,isAnimating:u,inWindowResizeScope:d}=this.state,p={"with-transition":!r||l},m={"with-transition":!d&&p["with-transition"]};return s.createElement(s.Fragment,null,s.createElement("div",{ref:this.veilRef,className:c("veil",p),onClick:u?void 0:this.onVeilClick,onTransitionEnd:this.onVeilTransitionEnd,role:"presentation"}),s.createElement("div",{ref:this.sheetRef,className:c("sheet",m),role:"dialog","aria-modal":"true","aria-label":o},!n&&s.createElement("div",{ref:this.sheetTopRef,className:c("sheet-top")},s.createElement("div",{className:c("sheet-top-resizer")})),s.createElement("div",{className:c("sheet-swipe-area",i),onTouchStart:this.onSwipeAreaTouchStart,onTouchMove:this.onSwipeAriaTouchMove,onTouchEnd:this.onSwipeAriaTouchEnd}),s.createElement("div",{ref:this.sheetScrollContainerRef,className:c("sheet-scroll-container",{"without-scroll":r>0&&a||h}),onTouchStart:this.onContentTouchStart,onTouchMove:this.onContentTouchMove,onTouchEnd:this.onContentTouchEnd,onTransitionEnd:this.onContentTransitionEnd},s.createElement("div",{ref:this.sheetContentBoxRef,className:c("sheet-content-box")},s.createElement("div",{className:c("sheet-content-box-border-compensation")},s.createElement("div",{className:c("sheet-content",e)},o&&s.createElement("div",{className:c("sheet-content-title")},o),s.createElement("div",null,t)))))))}get veilOpacity(){var t;return(null===(t=this.veilRef.current)||void 0===t?void 0:t.style.opacity)||0}get sheetTopHeight(){var t;return(null===(t=this.sheetTopRef.current)||void 0===t?void 0:t.getBoundingClientRect().height)||0}get sheetHeight(){var t;return(null===(t=this.sheetRef.current)||void 0===t?void 0:t.getBoundingClientRect().height)||0}get sheetScrollTop(){var t;return(null===(t=this.sheetScrollContainerRef.current)||void 0===t?void 0:t.scrollTop)||0}get sheetContentHeight(){var t;return(null===(t=this.sheetContentBoxRef.current)||void 0===t?void 0:t.getBoundingClientRect().height)||0}setInitialStyles(t){this.sheetScrollContainerRef.current&&this.sheetContentBoxRef.current&&(this.sheetScrollContainerRef.current.style.height=`${t}px`)}addListeners(){window.addEventListener("resize",this.onResizeWindow),this.sheetContentBoxRef.current&&(this.observer=new ResizeObserver(()=>{this.state.inWindowResizeScope||this.onResize()}),this.observer.observe(this.sheetContentBoxRef.current))}removeListeners(){window.removeEventListener("resize",this.onResizeWindow),this.observer&&this.observer.disconnect()}setHash(){let{id:t,platform:e,location:i,history:s}=this.props;if(e===h.t.BROWSER)return;let n=Object.assign(Object.assign({},i),{hash:t});switch(e){case h.t.IOS:i.hash&&p.push(i.hash),s.replace(n);break;case h.t.ANDROID:s.push(n)}}removeHash(){var t;let{id:e,platform:i,location:s,history:n}=this.props;if(i!==h.t.BROWSER&&s.hash===`#${e}`)switch(i){case h.t.IOS:n.replace(Object.assign(Object.assign({},s),{hash:null!==(t=p.pop())&&void 0!==t?t:""}));break;case h.t.ANDROID:n.goBack()}}shouldClose(t){let{id:e,platform:i,location:s,history:n}=this.props;return i!==h.t.BROWSER&&"POP"===n.action&&t.location.hash!==s.hash&&s.hash!==`#${e}`}}m.defaultProps={id:"sheet",allowHideOnContentScroll:!0};let v=function(t){var e;let i=(0,a.i)(t);return(e=class extends s.Component{render(){return s.createElement(t,Object.assign({},this.props,{mobile:this.context.mobile,platform:this.context.platform,useHistory:this.context.useHistory,useLocation:this.context.useLocation}))}}).displayName=`withMobile(${i})`,e.contextType=l.z,e}(function(t){let e=e=>{let{useHistory:i,useLocation:n}=e,o=(0,r._T)(e,["useHistory","useLocation"]);return s.createElement(t,Object.assign({},o,{history:i(),location:n()}))},i=t.displayName||t.name||"Component";return e.displayName=`withRouterWrapper(${i})`,e}(m)),f=({children:t,onClose:e,visible:i,id:r,title:h,className:a,contentClassName:l,swipeAreaClassName:u,allowHideOnContentScroll:d,hideTopBar:p,qa:m})=>{let[f,S]=s.useState(i),[g,w]=s.useState(i);return((0,n.y)({enabled:f}),!g&&i&&S(!0),i!==g&&w(i),f)?s.createElement(o.h,null,s.createElement("div",{"data-qa":m,className:c(null,a)},s.createElement(v,{id:r,content:t,contentClassName:l,swipeAreaClassName:u,title:h,visible:i,allowHideOnContentScroll:d,hideTopBar:p,hideSheet:()=>{e&&e(),S(!1)}}))):null}},48440:function(t,e,i){"use strict";i.d(e,{z:function(){return o}});var s=i(67294);let n={mobile:!1,platform:i(54026).t.BROWSER,useHistory:()=>({action:"",replace(){},push(){},goBack(){}}),useLocation:()=>({pathname:"",search:"",hash:""})},o=s.createContext(n)},54026:function(t,e,i){"use strict";i.d(e,{t:function(){return n}});var s,n,o=i(76657);(s=n||(n={})).IOS="ios",s.ANDROID="android",s.BROWSER="browser",(0,o.Ge)("root")({mobile:!0}).split(/\s+/)[1]},82771:function(t,e,i){"use strict";function s(t){return t.displayName||t.name||"Component"}i.d(e,{i:function(){return s}})},35464:function(t,e,i){"use strict";i.d(e,{y:function(){return c}});var s=i(67294);let n="padding-right",o="padding-bottom",r="overflow",h=[r,n,o],a=0,l={};function c({enabled:t}){s.useLayoutEffect(()=>{if(t)return 1==++a&&function(){let t=window.innerWidth-document.documentElement.clientWidth,e=window.innerHeight-document.documentElement.clientHeight,i=function(){let t=window.getComputedStyle(document.body);return{top:Number.parseFloat(t.paddingTop),right:Number.parseFloat(t.paddingRight),bottom:Number.parseFloat(t.paddingBottom),left:Number.parseFloat(t.paddingLeft)}}();l=function(){let t={};for(let e of h)t[e]=document.body.style.getPropertyValue(e);return t}(),document.body.style.setProperty(r,"hidden"),t&&document.body.style.setProperty(n,`${i.right+t}px`),e&&document.body.style.setProperty(o,`${i.bottom+e}px`)}(),()=>{0==--a&&function(){for(let t of h){let e=l[t];e?document.body.style.setProperty(t,e):document.body.style.removeProperty(t)}}()}},[t])}},62866:function(){}}]);